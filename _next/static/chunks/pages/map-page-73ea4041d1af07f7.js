(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{7823:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/map-page",function(){return n(9125)}])},9125:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(5893),o=n(9059),l=n(7294),s=n(4051),a=n.n(s),c=n(1163),i=n(8032);function u(e,t,n,r,o,l,s){try{var a=e[l](s),c=a.value}catch(i){return void n(i)}a.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function s(e){u(l,r,o,s,a,"next",e)}function a(e){u(l,r,o,s,a,"throw",e)}s(void 0)}))}}var p=null,y={},d={},m=function(e){var t=e.split("##");if(console.log("Mess",t),t[0].includes("user")){var n=t[1],r=JSON.parse(t[2]);d[n]=r}},h=function(){try{var e=(0,o.P)();Object.values(y).forEach((function(t,n){var r=(0,i.l4)();t.send("user##".concat(e,"##").concat(JSON.stringify(r),"##"))}))}catch(t){console.log(t)}},g=!1;function x(){return(x=f(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.useEffect)((function(){f(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Effect"),e.next=3,Promise.all([n.e(391),n.e(784)]).then(n.t.bind(n,5391,23));case 3:t=e.sent,t.default,(p=new window.Peer).on("connection",(function(e){e.on("data",m),e.on("open",(function(){e.send("Hi")})),e.on("error",(function(e){console.log("Peer Error",e)}))}));case 7:case"end":return e.stop()}}),e)})))()}),[]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){if(!p)return c.default.replace("/"),null;var t=(0,o.P)(),n=p.connect(e);return y[e]=n,null===n||void 0===n||n.on("open",(function(){n.send("".concat(t," : Hi!!"))})),!g&&(g=!0,console.log("Peer Msg sending start"),setInterval(h,1e3)),y}function v(){return Object.entries(d)}var j=n(7212),T=n(8527),w=n(8367);function O(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var k=function(e){return null!=e&&"object"===typeof e&&Number.isFinite(e.lat)&&Number.isFinite(e.lng)},C=(0,w.createCustomEqual)((function(e){return function(t,n){return k(t)||O(t,google.maps.LatLng)||k(n)||O(n,google.maps.LatLng)?new google.maps.LatLng(t).equals(new google.maps.LatLng(n)):e(t,n)}}));function S(e){var t=(0,l.useRef)();return C(e,t.current)||(t.current=e),t.current}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var P=function(e){var t,n,o=e.onClick,s=e.onIdle,a=e.children,c=e.style,i=_(e,["onClick","onIdle","children","style"]),u=(0,l.useRef)(null),f=(0,l.useState)(),p=f[0],y=f[1],d=I({},i,{fullscreenControl:!1,disableDefaultUI:!0,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:"terrain",styles:[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}]});return(0,l.useEffect)((function(){u.current&&!p&&y(new window.google.maps.Map(u.current,{}))}),[u,p]),t=function(){p&&p.setOptions(d)},n=[p,i],(0,l.useEffect)(t,n.map(S)),(0,l.useEffect)((function(){p&&(["click","idle"].forEach((function(e){return google.maps.event.clearListeners(p,e)})),o&&p.addListener("click",o),s&&p.addListener("idle",(function(){return s(p)})))}),[p,o,s]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:u,style:I({},c,{flexGrow:"1",height:"100%",width:"100%"})}),l.Children.map(a,(function(e){if((0,l.isValidElement)(e))return(0,l.cloneElement)(e,{map:p})}))]})},z=function(e){var t=(0,l.useState)(),n=t[0],r=t[1];return(0,l.useEffect)((function(){return n||r(new google.maps.Marker),function(){n&&n.setMap(null)}}),[n]),(0,l.useEffect)((function(){n&&n.setOptions(e)}),[n,e]),null};function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(e){return(0,r.jsx)("h1",{children:e})},M=function(e){var t=(0,l.useState)([]),n=t[0],o=t[1],s=(0,l.useState)(15),a=s[0],c=(s[1],(0,l.useState)(e.location||{lat:0,lng:0})),i=c[0];c[1];return(0,r.jsx)(T.kC,{h:"100%",w:"100%",sx:{"& > div":{width:"100%",height:"100%",flexGrow:"1"}},children:(0,r.jsx)(j.Wrapper,{apiKey:"AIzaSyD-sGLlorISzI6TRpjAIXDyg877EbFBkv0",render:N,children:(0,r.jsxs)(P,{center:i,onClick:function(e){o(A(n).concat([e.latLng]))},onIdle:function(e){console.log("onIdle")},zoom:a,style:{},children:[(0,r.jsx)(z,{position:i},1),v().map((function(e){return(0,r.jsx)(z,{icon:{path:"M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",fillColor:"#00ffff",fillOpacity:1,strokeWeight:2,rotation:0,scale:2},label:e[0],position:e[1]},e[0])}))]})})})},q=n(7375),F=n(5113),D=n(3317),R=n(9762),U=n(4612),X=n(9876);function G(e){var t=e.location,n=(0,o.P)(),s=(0,c.useRouter)();!function(){x.apply(this,arguments)}();var a=(0,q.qY)(),i=a.isOpen,u=a.onOpen,f=a.onClose,p=(0,q.qY)(),y=p.isOpen,d=p.onOpen,m=p.onClose;(0,l.useEffect)((function(){n||s.replace("/")}),[s,n]);var h=(0,l.useState)(""),g=h[0],j=h[1],w=(0,l.useRef)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(T.kC,{justify:"space-between",align:"center",bg:"gray.200",p:"4",boxShadow:"md",pos:"relative",zIndex:10,children:["".concat(n).toUpperCase(),(0,r.jsxs)(T.kC,{children:[v().length>0&&(0,r.jsx)(F.zx,{variant:"solid",ref:w,colorScheme:"teal",onClick:d,children:"Users"}),(0,r.jsx)(F.zx,{variant:"solid",colorScheme:"teal",onClick:u,children:"Add User"})]})]}),(0,r.jsx)(T.kC,{h:"100%",w:"100%",children:(0,r.jsx)(M,{location:t})}),(0,r.jsxs)(D.dy,{isOpen:y,placement:"right",onClose:m,finalFocusRef:w,children:[(0,r.jsx)(D.P1,{}),(0,r.jsxs)(D.sc,{children:[(0,r.jsx)(D.cC,{}),(0,r.jsx)(D.OX,{children:"Create your account"}),(0,r.jsx)(D.Ng,{children:(0,r.jsx)(T.aV,{spacing:3,children:v().map((function(e){return(0,r.jsxs)(T.HC,{children:[(0,r.jsx)(T.DE,{as:X.rE,color:"green.500"}),e[0]]},e[0])}))})}),(0,r.jsx)(D.ze,{})]})]}),(0,r.jsxs)(D.u_,{isOpen:i,onClose:f,children:[(0,r.jsx)(D.ZA,{}),(0,r.jsxs)(D.hz,{children:[(0,r.jsx)(D.xB,{children:"Modal Title"}),(0,r.jsx)(D.ol,{}),(0,r.jsx)(D.fe,{children:(0,r.jsx)(T.M5,{flexDir:"column",gap:"8",children:(0,r.jsxs)(R.NI,{children:[(0,r.jsx)(R.lX,{htmlFor:"other_user_name",children:"Connect to"}),(0,r.jsx)(U.II,{id:"other_user_name",type:"text",value:g,onChange:function(e){j(e.target.value)},placeholder:"Enter other user id"})]})})}),(0,r.jsxs)(D.mz,{children:[(0,r.jsx)(F.zx,{variant:"ghost",mr:3,onClick:f,children:"Close"}),(0,r.jsx)(F.zx,{variant:"solid",colorScheme:"teal",onClick:function(){g&&b(g),f()},children:"Submit"})]})]})]})]})}},9059:function(e,t,n){"use strict";n.d(t,{a:function(){return o},P:function(){return l}});var r={username:void 0};function o(e){r.username=e}function l(){return r.username}}},function(e){e.O(0,[804,139,774,888,179],(function(){return t=7823,e(e.s=t);var t}));var t=e.O();_N_E=t}]);