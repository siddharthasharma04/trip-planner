(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(786)}])},786:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(5893),o=n(8527),l=n(9762),s=n(4612),a=n(5113),c=n(7294),i={username:void 0};function u(){return i.username}var f=n(4051),y=n.n(f),p=n(1163),d=n(8032);function m(e,t,n,r,o,l,s){try{var a=e[l](s),c=a.value}catch(i){return void n(i)}a.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function s(e){m(l,r,o,s,a,"next",e)}function a(e){m(l,r,o,s,a,"throw",e)}s(void 0)}))}}var g=null,x={},b={},j=function(e){var t=e.split("##");if(console.log("Mess",t),t[0].includes("user")){var n=t[1],r=JSON.parse(t[2]);b[n]=r}},v=function(){try{var e=u();Object.values(x).forEach((function(t,n){var r=(0,d.l4)();t.send("user##".concat(e,"##").concat(JSON.stringify(r),"##"))}))}catch(t){console.log(t)}},T=!1;function w(){return C.apply(this,arguments)}function C(){return(C=h(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(y().mark((function e(){var t,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Effect"),e.next=3,Promise.all([n.e(391),n.e(784)]).then(n.t.bind(n,5391,23));case 3:t=e.sent,t.default,g||(r=u(),(g=new window.Peer(r)).on("connection",(function(e){e.on("data",j),e.on("open",(function(){e.send("Hi")})),e.on("error",(function(e){console.log("Peer Error",e)}))})));case 6:case"end":return e.stop()}}),e)})))();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){if(!g)return p.default.replace("/"),null;var t=u(),n=g.connect(e);return x[e]=n,null===n||void 0===n||n.on("open",(function(){n.send("".concat(t," : Hi!!"))})),!T&&(T=!0,console.log("Peer Msg sending start"),setInterval(v,1e3)),x}function O(){return Object.entries(b)}var S=n(7212),E=n(8367);function I(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var _=function(e){return null!=e&&"object"===typeof e&&Number.isFinite(e.lat)&&Number.isFinite(e.lng)},P=(0,E.createCustomEqual)((function(e){return function(t,n){return _(t)||I(t,google.maps.LatLng)||_(n)||I(n,google.maps.LatLng)?new google.maps.LatLng(t).equals(new google.maps.LatLng(n)):e(t,n)}}));function z(e){var t=(0,c.useRef)();return P(e,t.current)||(t.current=e),t.current}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){L(e,t,n[t])}))}return e}function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var M=function(e){var t,n,o=e.onClick,l=e.onIdle,s=e.children,a=e.style,i=A(e,["onClick","onIdle","children","style"]),u=(0,c.useRef)(null),f=(0,c.useState)(),y=f[0],p=f[1],d=N({},i,{fullscreenControl:!1,disableDefaultUI:!0,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:"terrain",styles:[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}]});return(0,c.useEffect)((function(){u.current&&!y&&p(new window.google.maps.Map(u.current,{}))}),[u,y]),t=function(){y&&y.setOptions(d)},n=[y,i],(0,c.useEffect)(t,n.map(z)),(0,c.useEffect)((function(){y&&(["click","idle"].forEach((function(e){return google.maps.event.clearListeners(y,e)})),o&&y.addListener("click",o),l&&y.addListener("idle",(function(){return l(y)})))}),[y,o,l]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:u,style:N({},a,{flexGrow:"1",height:"100%",width:"100%"})}),c.Children.map(s,(function(e){if((0,c.isValidElement)(e))return(0,c.cloneElement)(e,{map:y})}))]})},q=function(e){var t=(0,c.useState)(),n=t[0],r=t[1];return(0,c.useEffect)((function(){return n||r(new google.maps.Marker),function(){n&&n.setMap(null)}}),[n]),(0,c.useEffect)((function(){n&&n.setOptions(e)}),[n,e]),null};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(e){return(0,r.jsx)("h1",{children:e})},X=function(e){var t=(0,c.useState)([]),n=t[0],l=t[1],s=(0,c.useState)(15),a=s[0],i=(s[1],(0,c.useState)(e.location||{lat:0,lng:0})),u=i[0];i[1];return(0,r.jsx)(o.kC,{h:"100%",w:"100%",sx:{"& > div":{width:"100%",height:"100%",flexGrow:"1"}},children:(0,r.jsx)(S.Wrapper,{apiKey:"AIzaSyD-sGLlorISzI6TRpjAIXDyg877EbFBkv0",render:R,children:(0,r.jsxs)(M,{center:u,onClick:function(e){l(D(n).concat([e.latLng]))},onIdle:function(e){console.log("onIdle")},zoom:a,style:{},children:[(0,r.jsx)(q,{position:u},1),O().map((function(e){return(0,r.jsx)(q,{icon:{path:"M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",fillColor:"#00ffff",fillOpacity:1,strokeWeight:2,rotation:0,scale:2},label:e[0],position:e[1]},e[0])}))]})})})},U=n(7375),G=n(3317),H=n(9876);function V(e){var t=e.location,n=u(),i=(0,p.useRouter)();w();var f=(0,U.qY)(),y=f.isOpen,d=f.onOpen,m=f.onClose,h=(0,U.qY)(),g=h.isOpen,x=h.onOpen,b=h.onClose;(0,c.useEffect)((function(){n||i.replace("/")}),[i,n]);var j=(0,c.useState)(""),v=j[0],T=j[1],C=(0,c.useRef)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.kC,{justify:"space-between",align:"center",bg:"gray.200",p:"4",boxShadow:"md",pos:"relative",zIndex:10,children:["".concat(n).toUpperCase(),(0,r.jsxs)(o.kC,{children:[O().length>0&&(0,r.jsx)(a.zx,{variant:"solid",ref:C,colorScheme:"teal",onClick:x,children:"Users"}),(0,r.jsx)(a.zx,{variant:"solid",colorScheme:"teal",onClick:d,children:"Add User"})]})]}),(0,r.jsx)(o.kC,{h:"100%",w:"100%",children:(0,r.jsx)(X,{location:t})}),(0,r.jsxs)(G.dy,{isOpen:g,placement:"right",onClose:b,finalFocusRef:C,children:[(0,r.jsx)(G.P1,{}),(0,r.jsxs)(G.sc,{children:[(0,r.jsx)(G.cC,{}),(0,r.jsx)(G.OX,{children:"Create your account"}),(0,r.jsx)(G.Ng,{children:(0,r.jsx)(o.aV,{spacing:3,children:O().map((function(e){return(0,r.jsxs)(o.HC,{children:[(0,r.jsx)(o.DE,{as:H.rE,color:"green.500"}),e[0]]},e[0])}))})}),(0,r.jsx)(G.ze,{})]})]}),(0,r.jsxs)(G.u_,{isOpen:y,onClose:m,children:[(0,r.jsx)(G.ZA,{}),(0,r.jsxs)(G.hz,{children:[(0,r.jsx)(G.xB,{children:"Modal Title"}),(0,r.jsx)(G.ol,{}),(0,r.jsx)(G.fe,{children:(0,r.jsx)(o.M5,{flexDir:"column",gap:"8",children:(0,r.jsxs)(l.NI,{children:[(0,r.jsx)(l.lX,{htmlFor:"other_user_name",children:"Connect to"}),(0,r.jsx)(s.II,{id:"other_user_name",type:"text",value:v,onChange:function(e){T(e.target.value)},placeholder:"Enter other user id"})]})})}),(0,r.jsxs)(G.mz,{children:[(0,r.jsx)(a.zx,{variant:"ghost",mr:3,onClick:m,children:"Close"}),(0,r.jsx)(a.zx,{variant:"solid",colorScheme:"teal",onClick:function(){v&&k(v),m()},children:"Submit"})]})]})]})]})}function B(e){var t=e.location,n=(0,c.useState)(""),u=n[0],f=n[1],y=(0,c.useState)(!0),p=y[0],d=y[1];return(0,r.jsx)(r.Fragment,{children:p?(0,r.jsx)(o.kC,{w:"100%",h:"100%",justify:"center",children:(0,r.jsxs)(o.M5,{flexDir:"column",gap:"8",children:[(0,r.jsxs)(l.NI,{children:[(0,r.jsx)(l.lX,{htmlFor:"user_name",children:"Enter username"}),(0,r.jsx)(s.II,{id:"user_name",type:"text",value:u,onChange:function(e){f(e.target.value)}}),(0,r.jsx)(l.Q6,{children:"Please use a unique name."})]}),(0,r.jsx)(a.zx,{colorScheme:"blue",onClick:function(){u&&(!function(e){i.username=e}(u),w(),d(!1))},children:"Submit"})]})}):(0,r.jsx)(V,{location:t})})}}},function(e){e.O(0,[7,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);