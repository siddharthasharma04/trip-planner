(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4174)}])},4174:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(4051),o=n.n(r),l=n(5893),i=n(8527),s=n(9762),a=n(4612),c=n(5113),u=n(7294),f={username:void 0};function p(e){f.username=e}function y(){return f.username}var d=n(1163),m=n(8032);function h(e,t,n,r,o,l,i){try{var s=e[l](i),a=s.value}catch(c){return void n(c)}s.done?t(a):Promise.resolve(a).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function i(e){h(l,r,o,i,s,"next",e)}function s(e){h(l,r,o,i,s,"throw",e)}i(void 0)}))}}var x=null,v=null,b={},j={},T=function(e,t){var n=e.split("##");if(console.log("Mess",n),n[0].includes("user")){var r=n[1],o=JSON.parse(n[2]);j[r]=o,t(j)}},w=function(){try{var e=y();Object.values(b).forEach((function(t,n){var r=(0,m.l4)();t.send("user##".concat(e,"##").concat(JSON.stringify(r),"##"))}))}catch(t){console.log(t)}},C=!1;function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){};return new Promise(function(){var t=g(o().mark((function t(r,l){var i,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Effect"),t.next=3,Promise.all([n.e(391),n.e(784)]).then(n.t.bind(n,5391,23));case 3:i=t.sent,s=i.default,x||(y(),(x=new s(null,{debug:2})).on("open",(function(e){null===x.id?(console.log("Received null id from peer open"),x.id=v):v=x.id,console.log("ID: "+x.id),r(x)})),x.on("disconnected",(function(){console.log("Connection lost. Please reconnect"),x.id=v,x._lastServerId=v,x.reconnect()})),x.on("close",(function(){b={},console.log("Connection destroyed")})),x.on("error",(function(e){console.log("Peer Error",e)})),x.on("connection",(function(t){t&&t.open?x.on("open",(function(){x.send("Hi")})):t.on("data",(function(t){T(t,e)}))})));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}function O(e){if(!x)return d.default.replace("/"),null;var t=y(),n=x.connect(e);return b[e]=n,null===n||void 0===n||n.on("open",(function(){n.send("".concat(t," : Hi!!"))})),!C&&(C=!0,console.log("Peer Msg sending start"),setInterval(w,1e3)),b}function S(){return Object.entries(j)}var I=n(7212),E=n(8367);function _(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var P=function(e){return null!=e&&"object"===typeof e&&Number.isFinite(e.lat)&&Number.isFinite(e.lng)},z=(0,E.createCustomEqual)((function(e){return function(t,n){return P(t)||_(t,google.maps.LatLng)||P(n)||_(n,google.maps.LatLng)?new google.maps.LatLng(t).equals(new google.maps.LatLng(n)):e(t,n)}}));function L(e){var t=(0,u.useRef)();return z(e,t.current)||(t.current=e),t.current}var N=[{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#d6e2e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#cfd4d5"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#7492a8"}]},{featureType:"administrative.neighborhood",elementType:"labels.text.fill",stylers:[{lightness:25}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#dde2e3"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#cfd4d5"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#dde2e3"}]},{featureType:"landscape.natural",elementType:"labels.text.fill",stylers:[{color:"#7492a8"}]},{featureType:"landscape.natural.terrain",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#dde2e3"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:-100}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#588ca4"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a9de83"}]},{featureType:"poi.park",elementType:"geometry.stroke",stylers:[{color:"#bae6a1"}]},{featureType:"poi.sports_complex",elementType:"geometry.fill",stylers:[{color:"#c6e8b3"}]},{featureType:"poi.sports_complex",elementType:"geometry.stroke",stylers:[{color:"#bae6a1"}]},{featureType:"road",elementType:"labels.icon",stylers:[{saturation:-45},{lightness:10},{visibility:"on"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#41626b"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#c1d1d6"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#a6b5bb"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"on"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.fill",stylers:[{color:"#9fb6bd"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{saturation:-70}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#b4cbd4"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#588ca4"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#008cb5"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{saturation:-100},{lightness:-5}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#a6cbe3"}]}];function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}function F(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var q=function(e){var t,n,r=e.onClick,o=e.onIdle,i=e.children,s=e.style,a=F(e,["onClick","onIdle","children","style"]),c=(0,u.useRef)(null),f=(0,u.useState)(),p=f[0],y=f[1],d=A({},a,{fullscreenControl:!1,disableDefaultUI:!0,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:"terrain",styles:N});return(0,u.useEffect)((function(){if(c.current&&!p){y(new window.google.maps.Map(c.current,{}));var e=[{lat:34.1663277,lng:77.5317188},a.center];new google.maps.Polyline({path:e,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}).setMap(p)}}),[c,p]),t=function(){p&&p.setOptions(d)},n=[p,a],(0,u.useEffect)(t,n.map(L)),(0,u.useEffect)((function(){p&&(["click","idle"].forEach((function(e){return google.maps.event.clearListeners(p,e)})),r&&p.addListener("click",r),o&&p.addListener("idle",(function(){return o(p)})))}),[p,r,o]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{ref:c,style:A({},s,{flexGrow:"1",height:"100%",width:"100%"})}),u.Children.map(i,(function(e){if((0,u.isValidElement)(e))return(0,u.cloneElement)(e,{map:p})}))]})},D=function(e){var t=(0,u.useState)(),n=t[0],r=t[1];return(0,u.useEffect)((function(){return n||r(new google.maps.Marker),function(){n&&n.setMap(null)}}),[n]),(0,u.useEffect)((function(){n&&n.setOptions(e)}),[n,e]),null};function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=function(e){return(0,l.jsx)("h1",{children:e})},H=function(e){var t=(0,u.useState)([]),n=t[0],r=t[1],o=(0,u.useState)(15),s=o[0],a=(o[1],(0,u.useState)(e.location||{lat:0,lng:0})),c=a[0];a[1];return(0,l.jsx)(i.kC,{h:"100%",w:"100%",sx:{"& > div":{width:"100%",height:"100%",flexGrow:"1"}},children:(0,l.jsx)(I.Wrapper,{apiKey:"AIzaSyD-sGLlorISzI6TRpjAIXDyg877EbFBkv0",render:X,language:"hi",region:"IN",children:(0,l.jsxs)(q,{center:c,onClick:function(e){r(U(n).concat([e.latLng]))},onIdle:function(e){console.log("onIdle")},zoom:s,style:{},children:[(0,l.jsx)(D,{position:c},1),S().map((function(e){return(0,l.jsx)(D,{icon:{path:"M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",fillColor:"#00ffff",fillOpacity:1,strokeWeight:2,rotation:0,scale:2},label:e[0],position:e[1]},e[0])}))]})})})},B=n(7375),G=n(3317),V=n(9876);function W(e){var t=e.location,n=e.peerId,r=void 0===n?"":n,o=e.otherUsers,f=void 0===o?{}:o,p=y(),m=(0,d.useRouter)(),h=(0,B.qY)(),g=h.isOpen,x=h.onOpen,v=h.onClose,b=(0,B.qY)(),j=b.isOpen,T=b.onOpen,w=b.onClose;(0,u.useEffect)((function(){p||m.replace("/")}),[m,p]),console.log("Map page",f);var C=(0,u.useState)(""),k=C[0],I=C[1],E=(0,u.useRef)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i.kC,{justify:"space-between",align:"center",bg:"gray.200",p:"4",boxShadow:"md",pos:"relative",zIndex:10,children:[(0,l.jsxs)(i.kC,{flexDir:"column",children:["".concat(p).toUpperCase(),r&&(0,l.jsxs)(a.BZ,{size:"md",children:[(0,l.jsx)(a.II,{border:"gray",bg:"gray.300",userSelect:"all",value:r,isReadOnly:!0}),(0,l.jsx)(a.xH,{width:"4.5rem",children:(0,l.jsx)(c.zx,{h:"1.75rem",size:"sm",onClick:function(){navigator.clipboard.writeText(r)},children:"Copy"})})]})]}),(0,l.jsxs)(i.kC,{children:[Object.keys(f).length>0&&(0,l.jsx)(c.zx,{variant:"solid",ref:E,colorScheme:"teal",mr:2,onClick:T,children:(0,l.jsx)(V.ON,{})}),(0,l.jsxs)(c.zx,{variant:"solid",colorScheme:"teal",onClick:x,children:[(0,l.jsx)(V.dt,{mr:2})," Add"]})]})]}),(0,l.jsx)(i.kC,{h:"100%",w:"100%",children:(0,l.jsx)(H,{location:t})}),(0,l.jsxs)(G.dy,{isOpen:j,placement:"right",onClose:w,finalFocusRef:E,children:[(0,l.jsx)(G.P1,{}),(0,l.jsxs)(G.sc,{children:[(0,l.jsx)(G.cC,{}),(0,l.jsx)(G.OX,{children:"Connected User List"}),(0,l.jsx)(G.Ng,{children:(0,l.jsx)(i.aV,{spacing:3,children:S().map((function(e){return(0,l.jsxs)(i.HC,{children:[(0,l.jsx)(i.DE,{as:V.rE,color:"green.500"}),e[0]]},e[0])}))})}),(0,l.jsx)(G.ze,{})]})]}),(0,l.jsxs)(G.u_,{isOpen:g,onClose:v,children:[(0,l.jsx)(G.ZA,{}),(0,l.jsxs)(G.hz,{children:[(0,l.jsx)(G.xB,{children:"Modal Title"}),(0,l.jsx)(G.ol,{}),(0,l.jsx)(G.fe,{children:(0,l.jsx)(i.M5,{flexDir:"column",gap:"8",children:(0,l.jsxs)(s.NI,{children:[(0,l.jsx)(s.lX,{htmlFor:"other_user_name",children:"Connect to"}),(0,l.jsx)(a.II,{id:"other_user_name",type:"text",value:k,onChange:function(e){I(e.target.value)},placeholder:"Enter other user id"})]})})}),(0,l.jsxs)(G.mz,{children:[(0,l.jsx)(c.zx,{variant:"ghost",mr:3,onClick:v,children:"Close"}),(0,l.jsx)(c.zx,{variant:"solid",colorScheme:"teal",onClick:function(){if(k){O(k);I("")}v()},children:"Submit"})]})]})]})]})}function J(e,t,n,r,o,l,i){try{var s=e[l](i),a=s.value}catch(c){return void n(c)}s.done?t(a):Promise.resolve(a).then(r,o)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function i(e){J(l,r,o,i,s,"next",e)}function s(e){J(l,r,o,i,s,"throw",e)}i(void 0)}))}}function Z(e){var t=e.location,n=(0,u.useState)(""),r=n[0],f=n[1],y=(0,u.useState)(!0),d=y[0],m=y[1],h=(0,u.useState)(""),g=h[0],x=h[1],v=(0,u.useState)({}),b=v[0],j=v[1];return(0,l.jsx)(l.Fragment,{children:d?(0,l.jsx)(i.kC,{w:"100%",h:"100%",justify:"center",children:(0,l.jsxs)(i.M5,{flexDir:"column",gap:"8",children:[(0,l.jsxs)(s.NI,{children:[(0,l.jsx)(s.lX,{htmlFor:"user_name",children:"Enter username"}),(0,l.jsx)(a.II,{id:"user_name",type:"text",value:r,onChange:function(e){f(e.target.value)}}),(0,l.jsx)(s.Q6,{children:"Please use a unique name."})]}),(0,l.jsx)(c.zx,{colorScheme:"blue",onClick:function(){return T.apply(this,arguments)},children:"Submit"})]})}):(0,l.jsx)(W,{location:t,peerId:g,otherUsers:b})});function T(){return(T=Y(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return p(r),e.next=4,k(j);case 4:t=e.sent.id,x(t),m(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}},function(e){e.O(0,[7,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);